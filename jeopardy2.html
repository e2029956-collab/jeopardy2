<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Викторина: Текст и его восприятие</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 50%, #e8f5e8 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 3em;
            color: #1976d2;
            text-shadow: 2px 2px 4px rgba(25, 118, 210, 0.3);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.8;
            color: #388e3c;
        }

        .teams-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .team {
            background: linear-gradient(145deg, rgba(25,118,210,0.1), rgba(227,242,253,0.5));
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
            border: 3px solid #90caf9;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(144, 202, 249, 0.2);
        }

        .team.winner {
            border-color: #ffc107;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
            background: linear-gradient(145deg, rgba(255,193,7,0.2), rgba(255,248,225,0.4));
        }

        .team-name {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .team-score {
            font-size: 2.5em;
            font-weight: bold;
            color: #388e3c;
        }

        .questions-left {
            text-align: center;
            background: linear-gradient(145deg, rgba(232,245,232,0.4), rgba(200,230,201,0.6));
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #a5d6a7;
            margin-bottom: 30px;
        }

        .questions-left h3 {
            color: #2e7d32;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .questions-left .count {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 3px;
            background: linear-gradient(145deg, #90caf9, #64b5f6);
            padding: 3px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(100, 181, 246, 0.3);
        }

        .category-header {
            background: linear-gradient(145deg, #1976d2, #1565c0);
            padding: 20px 10px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9em;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 8px;
            line-height: 1.2;
        }

        .question-cell {
            background: linear-gradient(145deg, #fff3e0, #ffcc02);
            padding: 30px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.8em;
            font-weight: bold;
            color: #1976d2;
            border: 2px solid transparent;
            border-radius: 8px;
        }

        .question-cell:hover:not(.answered) {
            background: linear-gradient(145deg, #ffc107, #ffb300);
            transform: scale(1.05);
            border-color: #1976d2;
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
        }

        .question-cell.answered {
            background: linear-gradient(145deg, #e8f5e8, #c8e6c9);
            color: #81c784;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .question-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .question-content {
            background: linear-gradient(145deg, #fff, #f8f9fa);
            padding: 40px;
            border-radius: 20px;
            max-width: 900px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 40px rgba(25, 118, 210, 0.3);
            border: 3px solid #90caf9;
        }

        .question-value {
            color: #1976d2;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(25, 118, 210, 0.2);
        }

        .question-text {
            font-size: 1.8em;
            margin-bottom: 30px;
            line-height: 1.4;
            color: #333;
        }

        .modal-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-show-answer {
            background: linear-gradient(145deg, #ff9800, #f57c00);
            color: white;
        }

        .btn-show-answer:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 152, 0, 0.4);
        }

        .btn-close {
            background: linear-gradient(145deg, #f44336, #d32f2f);
            color: white;
        }

        .btn-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(244, 67, 54, 0.4);
        }

        .btn-team {
            background: linear-gradient(145deg, #4caf50, #388e3c);
            color: white;
            margin: 5px;
        }

        .btn-team:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-no-winner {
            background: linear-gradient(145deg, #bdbdbd, #9e9e9e);
            color: white;
            margin: 5px;
        }

        .btn-no-winner:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(189, 189, 189, 0.4);
        }

        .btn-final {
            background: linear-gradient(145deg, #1976d2, #1565c0);
            color: white;
            font-size: 1.5em;
            padding: 20px 40px;
        }

        .btn-final:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(25, 118, 210, 0.4);
        }

        .answer-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(232,245,232,0.3);
            border-radius: 15px;
            display: none;
            border: 2px solid #a5d6a7;
        }

        .correct-answer {
            font-size: 1.5em;
            color: #2e7d32;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .explanation {
            font-size: 1.2em;
            line-height: 1.5;
            color: #333;
            margin-bottom: 25px;
        }

        .team-selection {
            display: none;
        }

        .team-selection h3 {
            color: #1976d2;
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .game-over {
            text-align: center;
            background: linear-gradient(145deg, rgba(25,118,210,0.1), rgba(227,242,253,0.4));
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 3px solid #90caf9;
            box-shadow: 0 10px 30px rgba(144, 202, 249, 0.3);
        }

        .game-over h2 {
            color: #1976d2;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .winning-team {
            font-size: 2.5em;
            color: #4caf50;
            margin: 20px 0;
            font-weight: bold;
        }

        .final-scores {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .final-team-score {
            background: rgba(232,245,232,0.3);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #a5d6a7;
        }

        .restart-btn {
            background: linear-gradient(145deg, #4caf50, #388e3c);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.3em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .final-jeopardy {
            text-align: center;
            background: linear-gradient(145deg, rgba(25,118,210,0.1), rgba(144,202,249,0.2));
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #1976d2;
            margin-bottom: 30px;
        }

        .final-jeopardy h2 {
            color: #1976d2;
            font-size: 2em;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .teams-board {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .game-board {
                font-size: 0.8em;
            }
            
            .question-cell {
                padding: 15px 5px;
                font-size: 1.2em;
            }
            
            .category-header {
                padding: 15px 5px;
                font-size: 0.7em;
            }
            
            .title {
                font-size: 2em;
            }

            .modal-buttons {
                flex-direction: column;
                align-items: center;
            }

            .final-scores {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">📚 ВИКТОРИНА: ТЕКСТ И ЕГО ВОСПРИЯТИЕ 📖</h1>
            <p class="subtitle">Викторина по лингвистике и теории текста</p>
        </div>

        <div class="teams-board">
            <div class="team" id="team1">
                <div class="team-name">Команда 1</div>
                <div class="team-score" id="score1">0 баллов</div>
            </div>
            <div class="team" id="team2">
                <div class="team-name">Команда 2</div>
                <div class="team-score" id="score2">0 баллов</div>
            </div>
            <div class="team" id="team3">
                <div class="team-name">Команда 3</div>
                <div class="team-score" id="score3">0 баллов</div>
            </div>
            <div class="team" id="team4">
                <div class="team-name">Команда 4</div>
                <div class="team-score" id="score4">0 баллов</div>
            </div>
        </div>

        <div class="questions-left">
            <h3>Осталось вопросов</h3>
            <div class="count" id="questionsLeft">30</div>
        </div>

        <div id="gameBoard" class="game-board">
            <!-- Игровое поле будет создано здесь -->
        </div>

        <div id="finalJeopardy" class="final-jeopardy" style="display: none;">
            <h2>🏆 ФИНАЛЬНЫЙ ВОПРОС 🏆</h2>
            <p><strong>Категория:</strong> ТЕОРИЯ ТЕКСТА</p>
            <button class="btn btn-final" onclick="showFinalQuestion()">Показать финальный вопрос</button>
        </div>

        <div id="gameOver" class="game-over" style="display: none;">
            <h2>🎉 Игра завершена! 🎉</h2>
            <div class="winning-team" id="winnerAnnouncement"></div>
            <div class="final-scores" id="finalScores"></div>
            <button class="restart-btn" onclick="restartGame()">Играть снова</button>
        </div>
    </div>

    <!-- Модальное окно вопроса -->
    <div id="questionModal" class="question-modal">
        <div class="question-content">
            <div class="question-value" id="questionValue">100 баллов</div>
            <div class="question-text" id="questionText">Здесь будет вопрос</div>
            
            <div class="modal-buttons" id="initialButtons">
                <button class="btn btn-show-answer" onclick="showAnswer()">Показать правильный ответ</button>
                <button class="btn btn-close" onclick="closeModal()">Закрыть</button>
            </div>

            <div class="answer-section" id="answerSection">
                <div class="correct-answer" id="correctAnswer"></div>
                <div class="explanation" id="explanation"></div>
                
                <div class="team-selection" id="teamSelection">
                    <h3>Какая команда ответила правильно?</h3>
                    <div class="modal-buttons">
                        <button class="btn btn-team" onclick="awardPoints(1)">Команда 1</button>
                        <button class="btn btn-team" onclick="awardPoints(2)">Команда 2</button>
                        <button class="btn btn-team" onclick="awardPoints(3)">Команда 3</button>
                        <button class="btn btn-team" onclick="awardPoints(4)">Команда 4</button>
                        <button class="btn btn-no-winner" onclick="awardPoints(0)">Никто не ответил</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const categories = [
            "Определения текста",
            "Классификация текстов", 
            "Типы информации",
            "Пресуппозиция и фон",
            "Примеры и цитаты",
            "Теория восприятия"
        ];

        const questions = {
            "Определения текста": [
                {
                    question: "Как определяет текст И.Р. Гальперин?",
                    answer: "Произведение речетворческого процесса, обладающее завершённостью и объективированное в виде письменного документа",
                    explanation: "Это классическое определение подчеркивает процессуальность создания текста и его материальную фиксацию.",
                    value: 100
                },
                {
                    question: "Какие свойства текста выделяются в самом широком понимании?",
                    answer: "Связность и цельность",
                    explanation: "Связность обеспечивает формальные связи между элементами, а цельность - смысловое единство.",
                    value: 200
                },
                {
                    question: "Как определяет текст Т.М. Дридзе?",
                    answer: "Сложный знак и целостная единица общения",
                    explanation: "Определение подчеркивает знаковую природу текста и его коммуникативную функцию.",
                    value: 300
                },
                {
                    question: "Как определяет текст Л.М. Лосева?",
                    answer: "Сообщение в письменной форме, содержательная и структурная завершённость, отношение автора к сообщаемому",
                    explanation: "Лосева выделила три ключевых признака, включая субъективный компонент - авторскую позицию.",
                    value: 400
                },
                {
                    question: "Что такое предложение (высказывание, фраза, текстема)?",
                    answer: "Минимальная коммуникативная единица текста, которая осознается в отношении связей с другими подобными единицами",
                    explanation: "Это определение подчеркивает реляционный характер текстовых единиц.",
                    value: 500
                }
            ],
            "Классификация текстов": [
                {
                    question: "На какие две группы можно разделить тексты, исходя из характера отражения действительности?",
                    answer: "Художественные и нехудожественные",
                    explanation: "Это базовая типология, основанная на различии в способах представления реальности.",
                    value: 100
                },
                {
                    question: "Что такие нехудожественные тексты?",
                    answer: "Тексты, которые характеризуются установкой на однозначность восприятия",
                    explanation: "В отличие от художественных, они стремятся к ясности и единственности толкования.",
                    value: 200
                },
                {
                    question: "Какие типы текстов выделял Э. Верлих?",
                    answer: "Дескриптивные, нарративные, объяснительные, аргументативные и инструктивные",
                    explanation: "Классификация Верлиха основана на коммуникативных функциях текстов.",
                    value: 300
                },
                {
                    question: "Что такое креолизованные тексты?",
                    answer: "Тексты смешанного типа, сочетающие вербальные и невербальные средства передачи информации",
                    explanation: "Такие тексты активно используются в современных медиа и рекламе.",
                    value: 400
                },
                {
                    question: "Что такое полная креолизация?",
                    answer: "Тип креолизации, при котором вербальная часть полностью зависит от изобразительного ряда",
                    explanation: "В таких текстах изображение играет доминирующую роль в передаче смысла.",
                    value: 500
                }
            ],
            "Типы информации": [
                {
                    question: "Что такое информация в научно-теоретическом плане?",
                    answer: "Новые сведения о предметах, явлениях и событиях",
                    explanation: "Информация предполагает обязательную новизну для получателя.",
                    value: 100
                },
                {
                    question: "Что такое содержательно-фактуальная информация?",
                    answer: "Тип информации, который содержит сведения о фактах, событиях и процессах окружающего мира",
                    explanation: "По классификации Гальперина, это основной тип информации в нехудожественных текстах.",
                    value: 200
                },
                {
                    question: "Что такое оперативная информация?",
                    answer: "Побуждение к совершению определенных действий",
                    explanation: "По классификации И.С. Алексеевой, этот тип информации имеет практическую направленность.",
                    value: 300
                },
                {
                    question: "Что такое содержательно-подтекстовая информация?",
                    answer: "Скрытая информация, которая порождается благодаря ассоциативным и коннотативным связям",
                    explanation: "Этот тип информации требует от читателя активной интерпретативной деятельности.",
                    value: 400
                },
                {
                    question: "Что такое эстетическая информация?",
                    answer: "Тип информации, который передает эмоции и чувства от средств оформления других типов информации",
                    explanation: "По Алексеевой, эстетическая информация связана с формой подачи контента.",
                    value: 500
                }
            ],
            "Пресуппозиция и фон": [
                {
                    question: "Что такое пресуппозиция?",
                    answer: "Предварительное знание, дающее возможность адекватно воспринять текст",
                    explanation: "Пресуппозиция - это базовые знания, необходимые для понимания текста.",
                    value: 100
                },
                {
                    question: "Что такое фоновые знания?",
                    answer: "Знания реалий и культуры, которые должны быть общими у автора и читателя для успешного понимания текста",
                    explanation: "Фоновые знания обеспечивают культурный контекст коммуникации.",
                    value: 200
                },
                {
                    question: "Какие типы фоновых знаний выделяет В.Я. Шабес?",
                    answer: "Социальные, коллективные и индивидуальные фоновые знания",
                    explanation: "Классификация отражает различные уровни общности знаний в социуме.",
                    value: 300
                },
                {
                    question: "Что такое прецедентная информация?",
                    answer: "Единицы языка и культуры, которые являются общеизвестными для определенной группы носителей языка и культуры",
                    explanation: "Прецедентные феномены служат культурными символами и отсылками.",
                    value: 400
                },
                {
                    question: "Что такое житейские фоновые знания?",
                    answer: "Информация общего характера, которая присутствует в сознании участников коммуникации",
                    explanation: "Это базовый уровень знаний, необходимый для повседневного общения.",
                    value: 500
                }
            ],
            "Примеры и цитаты": [
                {
                    question: "Что такое ткань, сплетение, соединение?",
                    answer: "Латинское значение слова «текст»",
                    explanation: "Этимология слова отражает представление о тексте как о переплетении элементов.",
                    value: 100
                },
                {
                    question: "Знание какого стихотворения помогает воспринять отрывок из произведения Н. Коржавина?",
                    answer: "«Есть женщины в русских селеньях...» Н.А. Некрасова",
                    explanation: "Интертекстуальная отсылка создает дополнительные смысловые связи.",
                    value: 200
                },
                {
                    question: "На какое реально существующее произведение ссылается фраза «Был ли мальчик?» из четверостишия А. Межирова?",
                    answer: "Роман М. Горького «Жизнь Клима Самгина»",
                    explanation: "Устойчивое выражение, означающее сомнение в факте существования обсуждаемого предмета.",
                    value: 300
                },
                {
                    question: "К каким знаниям апеллирует фраза «the Old Etonian» из примера?",
                    answer: "Фоновые знания об элитных учебных заведениях для мальчиков в Великобритании",
                    explanation: "Итон - престижная школа, выпускники которой занимают высокие посты в британском обществе.",
                    value: 400
                },
                {
                    question: "Что такое эллиптичность?",
                    answer: "Пропуск необходимых частей в речи или тексте, который легко восстанавливается по контексту",
                    explanation: "По А.М. Пешковскому, естественная речь 'по природе своей' обладает этим свойством.",
                    value: 500
                }
            ],
            "Теория восприятия": [
                {
                    question: "Какой процесс лежит в основе понимания текста?",
                    answer: "Интерпретация",
                    explanation: "Понимание текста - это активный процесс создания смысла читателем.",
                    value: 100
                },
                {
                    question: "Что влияет на восприятие текста читателем?",
                    answer: "Фоновые знания и личный опыт",
                    explanation: "Каждый читатель привносит в текст собственный контекст понимания.",
                    value: 200
                },
                {
                    question: "Какие факторы определяют успешность коммуникации через текст?",
                    answer: "Общность фоновых знаний автора и читателя",
                    explanation: "Чем больше общих знаний, тем эффективнее передача информации.",
                    value: 300
                },
                {
                    question: "Что происходит при недостатке фоновых знаний у читателя?",
                    answer: "Искажение или неполное понимание текста",
                    explanation: "Отсутствие необходимых знаний может привести к коммуникативным неудачам.",
                    value: 400
                },
                {
                    question: "Какую роль играет контекст в понимании текста?",
                    answer: "Определяет актуальные значения многозначных элементов",
                    explanation: "Контекст помогает устранить неоднозначность и выбрать правильную интерпретацию.",
                    value: 500
                }
            ]
        };

        const finalQuestion = {
            question: "Назовите основные составляющие успешной текстовой коммуникации согласно теории восприятия текста.",
            answer: "Автор, текст, читатель и общие фоновые знания",
            explanation: "Эти четыре элемента образуют основу коммуникативной модели текста и определяют успешность передачи информации."
        };

        let teamScores = [0, 0, 0, 0];
        let answeredQuestions = new Set();
        let currentQuestion = null;
        let gamePhase = 'regular';

        function initGame() {
            createGameBoard();
            updateDisplay();
        }

        function createGameBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';

            // Создаем заголовки категорий
            categories.forEach(category => {
                const header = document.createElement('div');
                header.className = 'category-header';
                header.textContent = category;
                board.appendChild(header);
            });

            // Создаем ячейки вопросов
            for (let i = 0; i < 5; i++) {
                categories.forEach((category, catIndex) => {
                    const cell = document.createElement('div');
                    cell.className = 'question-cell';
                    cell.textContent = `${(i + 1) * 100}`;
                    cell.onclick = () => openQuestion(category, i);
                    cell.id = `cell-${catIndex}-${i}`;
                    board.appendChild(cell);
                });
            }
        }

        function openQuestion(category, questionIndex) {
            const cellId = `cell-${categories.indexOf(category)}-${questionIndex}`;
            
            if (answeredQuestions.has(cellId)) return;

            currentQuestion = {
                category: category,
                index: questionIndex,
                cellId: cellId,
                data: questions[category][questionIndex]
            };

            // Сброс состояния модального окна
            document.getElementById('questionValue').textContent = `${currentQuestion.data.value} баллов`;
            document.getElementById('questionText').textContent = currentQuestion.data.question;
            document.getElementById('initialButtons').style.display = 'flex';
            document.getElementById('answerSection').style.display = 'none';
            document.getElementById('teamSelection').style.display = 'none';
            
            document.getElementById('questionModal').style.display = 'flex';
        }

        function showFinalQuestion() {
            currentQuestion = {
                data: finalQuestion,
                cellId: 'final'
            };

            document.getElementById('questionValue').textContent = 'ФИНАЛЬНЫЙ ВОПРОС';
            document.getElementById('questionText').textContent = finalQuestion.question;
            document.getElementById('initialButtons').style.display = 'flex';
            document.getElementById('answerSection').style.display = 'none';
            document.getElementById('teamSelection').style.display = 'none';
            
            document.getElementById('questionModal').style.display = 'flex';
            gamePhase = 'final';
        }

        function showAnswer() {
            document.getElementById('initialButtons').style.display = 'none';
            
            document.getElementById('correctAnswer').textContent = `Ответ: ${currentQuestion.data.answer}`;
            document.getElementById('explanation').textContent = currentQuestion.data.explanation;
            document.getElementById('answerSection').style.display = 'block';
            document.getElementById('teamSelection').style.display = 'block';
        }

        function awardPoints(teamNumber) {
            if (gamePhase === 'final') {
                if (teamNumber > 0) {
                    teamScores[teamNumber - 1] += 500;
                }
                setTimeout(showGameOver, 1000);
            } else {
                if (teamNumber > 0) {
                    teamScores[teamNumber - 1] += currentQuestion.data.value;
                    
                    const teamElement = document.getElementById(`team${teamNumber}`);
                    teamElement.classList.add('winner');
                    setTimeout(() => {
                        teamElement.classList.remove('winner');
                    }, 2000);
                }

                answeredQuestions.add(currentQuestion.cellId);
                document.getElementById(currentQuestion.cellId).classList.add('answered');
                updateDisplay();

                if (answeredQuestions.size === 30) {
                    setTimeout(showFinalJeopardy, 1000);
                }
            }
            
            closeModal();
        }

        function showFinalJeopardy() {
            document.getElementById('gameBoard').style.display = 'none';
            document.getElementById('finalJeopardy').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('questionModal').style.display = 'none';
        }

        function updateDisplay() {
            for (let i = 0; i < 4; i++) {
                document.getElementById(`score${i + 1}`).textContent = `${teamScores[i]} баллов`;
            }
            
            document.getElementById('questionsLeft').textContent = 30 - answeredQuestions.size;
        }

        function showGameOver() {
            document.getElementById('finalJeopardy').style.display = 'none';
            
            const maxScore = Math.max(...teamScores);
            const winningTeams = teamScores.map((score, index) => 
                score === maxScore ? index + 1 : null
            ).filter(team => team !== null);
            
            let winnerText;
            if (winningTeams.length === 1) {
                winnerText = `🏆 Команда ${winningTeams[0]} побеждает! 🏆`;
            } else {
                winnerText = `🏆 Ничья между командами ${winningTeams.join(' и ')}! 🏆`;
            }
            
            document.getElementById('winnerAnnouncement').textContent = winnerText;
            
            const finalScoresDiv = document.getElementById('finalScores');
            finalScoresDiv.innerHTML = '';
            
            for (let i = 0; i < 4; i++) {
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'final-team-score';
                scoreDiv.innerHTML = `
                    <strong>Команда ${i + 1}:</strong><br>
                    <span style="font-size: 1.5em; color: #4CAF50;">${teamScores[i]} баллов</span>
                `;
                finalScoresDiv.appendChild(scoreDiv);
            }
            
            document.getElementById('gameOver').style.display = 'block';
        }

        function restartGame() {
            teamScores = [0, 0, 0, 0];
            answeredQuestions.clear();
            currentQuestion = null;
            gamePhase = 'regular';
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('finalJeopardy').style.display = 'none';
            document.getElementById('gameBoard').style.display = 'grid';
            initGame();
        }

        document.getElementById('questionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        initGame();
    </script>
</body>
</html>